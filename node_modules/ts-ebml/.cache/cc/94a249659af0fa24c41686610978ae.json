{"id":"ZbgV","dependencies":[{"name":"/home/legokichi/Github/ts-ebml/package.json","includedInParent":true,"mtime":1708492278635},{"name":"./tools","loc":{"line":26,"column":35,"index":1139},"parent":"/home/legokichi/Github/ts-ebml/lib/EBMLEncoder.js","resolved":"/home/legokichi/Github/ts-ebml/lib/tools.js"},{"name":"matroska-schema","loc":{"line":27,"column":23,"index":1175},"parent":"/home/legokichi/Github/ts-ebml/lib/EBMLEncoder.js","resolved":"/home/legokichi/Github/ts-ebml/node_modules/matroska-schema/schema.js"}],"generated":{"js":"\"use strict\";var e=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var s=Object.getOwnPropertyDescriptor(t,r);s&&(\"get\"in s?t.__esModule:!s.writable&&!s.configurable)||(s={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,s)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),t=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,\"default\",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(r){if(r&&r.__esModule)return r;var n={};if(null!=r)for(var s in r)\"default\"!==s&&Object.prototype.hasOwnProperty.call(r,s)&&e(n,r,s);return t(n,r),n};Object.defineProperty(exports,\"__esModule\",{value:!0});const n=r(require(\"./tools\")),s=require(\"matroska-schema\"),{byEbmlID:a}=s;class o{constructor(){this._schema=a,this._buffers=[],this._stack=[]}encode(e){return n.concat(e.reduce((e,t)=>e.concat(this.encodeChunk(t)),[])).buffer}encodeChunk(e){return\"m\"===e.type?e.isEnd?this.endTag(e):this.startTag(e):(e.data=Buffer.from(e.data),this.writeTag(e)),this.flush()}flush(){const e=this._buffers;return this._buffers=[],e}getSchemaInfo(e){for(const[t,r]of Object.entries(this._schema))if(r.name===e)return Buffer.from(Number(t).toString(16),\"hex\");return null}writeTag(e){const t=e.name,r=this.getSchemaInfo(t),s=e.data;if(null==r)throw new Error(\"No schema entry found for \"+t);const a=n.encodeTag(r,s);if(this._stack.length>0){this._stack[this._stack.length-1].children.push({tagId:r,elm:e,children:[],data:a})}else this._buffers=this._buffers.concat(a)}startTag(e){const t=e.name,r=this.getSchemaInfo(t);if(null==r)throw new Error(\"No schema entry found for \"+t);if(e.unknownSize){const t=n.encodeTag(r,Buffer.from(new ArrayBuffer(0)),e.unknownSize);return void(this._buffers=this._buffers.concat(t))}const s={tagId:r,elm:e,children:[],data:null};this._stack.length>0&&this._stack[this._stack.length-1].children.push(s),this._stack.push(s)}endTag(e){const t=this._stack.pop();if(null==t)throw new Error(\"EBML structure is broken\");if(t.elm.name!==e.name)throw new Error(\"EBML structure is broken\");const r=t.children.reduce((e,t)=>{if(null===t.data)throw new Error(\"EBML structure is broken\");return e.concat(t.data)},[]),s=n.concat(r);\"m\"===t.elm.type?t.data=n.encodeTag(t.tagId,s,t.elm.unknownSize):t.data=n.encodeTag(t.tagId,s),this._stack.length<1&&(this._buffers=this._buffers.concat(t.data))}}exports.default=o;"},"sourceMaps":{"js":{"mappings":[{"source":"EBMLEncoder.js","original":{"line":1,"column":0},"generated":{"line":1,"column":0}},{"source":"EBMLEncoder.js","original":{"line":2,"column":0},"generated":{"line":1,"column":13}},{"source":"EBMLEncoder.js","name":"__createBinding","original":{"line":2,"column":4},"generated":{"line":1,"column":17}},{"source":"EBMLEncoder.js","original":{"line":2,"column":23},"generated":{"line":1,"column":19}},{"source":"EBMLEncoder.js","original":{"line":2,"column":31},"generated":{"line":1,"column":25}},{"source":"EBMLEncoder.js","name":"__createBinding","original":{"line":2,"column":36},"generated":{"line":1,"column":30}},{"source":"EBMLEncoder.js","name":"Object","original":{"line":2,"column":57},"generated":{"line":1,"column":48}},{"source":"EBMLEncoder.js","name":"create","original":{"line":2,"column":64},"generated":{"line":1,"column":55}},{"source":"EBMLEncoder.js","original":{"line":2,"column":74},"generated":{"line":1,"column":62}},{"source":"EBMLEncoder.js","name":"o","original":{"line":2,"column":83},"generated":{"line":1,"column":71}},{"source":"EBMLEncoder.js","name":"m","original":{"line":2,"column":86},"generated":{"line":1,"column":73}},{"source":"EBMLEncoder.js","name":"k","original":{"line":2,"column":89},"generated":{"line":1,"column":75}},{"source":"EBMLEncoder.js","name":"k2","original":{"line":2,"column":92},"generated":{"line":1,"column":77}},{"source":"EBMLEncoder.js","name":"undefined","original":{"line":3,"column":15},"generated":{"line":1,"column":85}},{"source":"EBMLEncoder.js","name":"k2","original":{"line":3,"column":8},"generated":{"line":1,"column":89}},{"source":"EBMLEncoder.js","name":"k2","original":{"line":3,"column":26},"generated":{"line":1,"column":93}},{"source":"EBMLEncoder.js","name":"k","original":{"line":3,"column":31},"generated":{"line":1,"column":95}},{"source":"EBMLEncoder.js","original":{"line":4,"column":4},"generated":{"line":1,"column":98}},{"source":"EBMLEncoder.js","name":"desc","original":{"line":4,"column":8},"generated":{"line":1,"column":102}},{"source":"EBMLEncoder.js","name":"Object","original":{"line":4,"column":15},"generated":{"line":1,"column":104}},{"source":"EBMLEncoder.js","name":"getOwnPropertyDescriptor","original":{"line":4,"column":22},"generated":{"line":1,"column":111}},{"source":"EBMLEncoder.js","name":"m","original":{"line":4,"column":47},"generated":{"line":1,"column":136}},{"source":"EBMLEncoder.js","name":"k","original":{"line":4,"column":50},"generated":{"line":1,"column":138}},{"source":"EBMLEncoder.js","name":"desc","original":{"line":5,"column":9},"generated":{"line":1,"column":141}},{"source":"EBMLEncoder.js","original":{"line":5,"column":18},"generated":{"line":1,"column":145}},{"source":"EBMLEncoder.js","name":"desc","original":{"line":5,"column":27},"generated":{"line":1,"column":153}},{"source":"EBMLEncoder.js","name":"m","original":{"line":5,"column":35},"generated":{"line":1,"column":155}},{"source":"EBMLEncoder.js","name":"__esModule","original":{"line":5,"column":37},"generated":{"line":1,"column":157}},{"source":"EBMLEncoder.js","name":"desc","original":{"line":5,"column":50},"generated":{"line":1,"column":169}},{"source":"EBMLEncoder.js","name":"writable","original":{"line":5,"column":55},"generated":{"line":1,"column":171}},{"source":"EBMLEncoder.js","name":"desc","original":{"line":5,"column":67},"generated":{"line":1,"column":182}},{"source":"EBMLEncoder.js","name":"configurable","original":{"line":5,"column":72},"generated":{"line":1,"column":184}},{"source":"EBMLEncoder.js","name":"desc","original":{"line":6,"column":6},"generated":{"line":1,"column":200}},{"source":"EBMLEncoder.js","original":{"line":6,"column":13},"generated":{"line":1,"column":202}},{"source":"EBMLEncoder.js","name":"enumerable","original":{"line":6,"column":15},"generated":{"line":1,"column":203}},{"source":"EBMLEncoder.js","original":{"line":6,"column":27},"generated":{"line":1,"column":215}},{"source":"EBMLEncoder.js","name":"get","original":{"line":6,"column":33},"generated":{"line":1,"column":217}},{"source":"EBMLEncoder.js","original":{"line":6,"column":38},"generated":{"line":1,"column":221}},{"source":"EBMLEncoder.js","original":{"line":6,"column":51},"generated":{"line":1,"column":232}},{"source":"EBMLEncoder.js","name":"m","original":{"line":6,"column":58},"generated":{"line":1,"column":239}},{"source":"EBMLEncoder.js","name":"k","original":{"line":6,"column":60},"generated":{"line":1,"column":241}},{"source":"EBMLEncoder.js","name":"Object","original":{"line":8,"column":4},"generated":{"line":1,"column":247}},{"source":"EBMLEncoder.js","name":"defineProperty","original":{"line":8,"column":11},"generated":{"line":1,"column":254}},{"source":"EBMLEncoder.js","name":"o","original":{"line":8,"column":26},"generated":{"line":1,"column":269}},{"source":"EBMLEncoder.js","name":"k2","original":{"line":8,"column":29},"generated":{"line":1,"column":271}},{"source":"EBMLEncoder.js","name":"desc","original":{"line":8,"column":33},"generated":{"line":1,"column":273}},{"source":"EBMLEncoder.js","original":{"line":9,"column":6},"generated":{"line":1,"column":277}},{"source":"EBMLEncoder.js","name":"o","original":{"line":9,"column":15},"generated":{"line":1,"column":286}},{"source":"EBMLEncoder.js","name":"m","original":{"line":9,"column":18},"generated":{"line":1,"column":288}},{"source":"EBMLEncoder.js","name":"k","original":{"line":9,"column":21},"generated":{"line":1,"column":290}},{"source":"EBMLEncoder.js","name":"k2","original":{"line":9,"column":24},"generated":{"line":1,"column":292}},{"source":"EBMLEncoder.js","name":"undefined","original":{"line":10,"column":15},"generated":{"line":1,"column":300}},{"source":"EBMLEncoder.js","name":"k2","original":{"line":10,"column":8},"generated":{"line":1,"column":304}},{"source":"EBMLEncoder.js","name":"k2","original":{"line":10,"column":26},"generated":{"line":1,"column":308}},{"source":"EBMLEncoder.js","name":"k","original":{"line":10,"column":31},"generated":{"line":1,"column":310}},{"source":"EBMLEncoder.js","name":"o","original":{"line":11,"column":4},"generated":{"line":1,"column":313}},{"source":"EBMLEncoder.js","name":"k2","original":{"line":11,"column":6},"generated":{"line":1,"column":315}},{"source":"EBMLEncoder.js","name":"m","original":{"line":11,"column":12},"generated":{"line":1,"column":318}},{"source":"EBMLEncoder.js","name":"k","original":{"line":11,"column":14},"generated":{"line":1,"column":320}},{"source":"EBMLEncoder.js","name":"__setModuleDefault","original":{"line":13,"column":4},"generated":{"line":1,"column":325}},{"source":"EBMLEncoder.js","original":{"line":13,"column":26},"generated":{"line":1,"column":327}},{"source":"EBMLEncoder.js","original":{"line":13,"column":34},"generated":{"line":1,"column":333}},{"source":"EBMLEncoder.js","name":"__setModuleDefault","original":{"line":13,"column":39},"generated":{"line":1,"column":338}},{"source":"EBMLEncoder.js","name":"Object","original":{"line":13,"column":63},"generated":{"line":1,"column":359}},{"source":"EBMLEncoder.js","name":"create","original":{"line":13,"column":70},"generated":{"line":1,"column":366}},{"source":"EBMLEncoder.js","original":{"line":13,"column":80},"generated":{"line":1,"column":373}},{"source":"EBMLEncoder.js","name":"o","original":{"line":13,"column":89},"generated":{"line":1,"column":382}},{"source":"EBMLEncoder.js","name":"v","original":{"line":13,"column":92},"generated":{"line":1,"column":384}},{"source":"EBMLEncoder.js","name":"Object","original":{"line":14,"column":4},"generated":{"line":1,"column":387}},{"source":"EBMLEncoder.js","name":"defineProperty","original":{"line":14,"column":11},"generated":{"line":1,"column":394}},{"source":"EBMLEncoder.js","name":"o","original":{"line":14,"column":26},"generated":{"line":1,"column":409}},{"source":"EBMLEncoder.js","original":{"line":14,"column":29},"generated":{"line":1,"column":411}},{"source":"EBMLEncoder.js","original":{"line":14,"column":40},"generated":{"line":1,"column":421}},{"source":"EBMLEncoder.js","name":"enumerable","original":{"line":14,"column":42},"generated":{"line":1,"column":422}},{"source":"EBMLEncoder.js","original":{"line":14,"column":54},"generated":{"line":1,"column":434}},{"source":"EBMLEncoder.js","name":"value","original":{"line":14,"column":60},"generated":{"line":1,"column":436}},{"source":"EBMLEncoder.js","name":"v","original":{"line":14,"column":67},"generated":{"line":1,"column":442}},{"source":"EBMLEncoder.js","original":{"line":15,"column":5},"generated":{"line":1,"column":447}},{"source":"EBMLEncoder.js","name":"o","original":{"line":15,"column":14},"generated":{"line":1,"column":456}},{"source":"EBMLEncoder.js","name":"v","original":{"line":15,"column":17},"generated":{"line":1,"column":458}},{"source":"EBMLEncoder.js","name":"o","original":{"line":16,"column":4},"generated":{"line":1,"column":461}},{"source":"EBMLEncoder.js","original":{"line":16,"column":15},"generated":{"line":1,"column":463}},{"source":"EBMLEncoder.js","name":"v","original":{"line":16,"column":19},"generated":{"line":1,"column":471}},{"source":"EBMLEncoder.js","name":"__importStar","original":{"line":18,"column":4},"generated":{"line":1,"column":475}},{"source":"EBMLEncoder.js","original":{"line":18,"column":20},"generated":{"line":1,"column":477}},{"source":"EBMLEncoder.js","original":{"line":18,"column":28},"generated":{"line":1,"column":483}},{"source":"EBMLEncoder.js","name":"__importStar","original":{"line":18,"column":33},"generated":{"line":1,"column":488}},{"source":"EBMLEncoder.js","original":{"line":18,"column":50},"generated":{"line":1,"column":502}},{"source":"EBMLEncoder.js","name":"mod","original":{"line":18,"column":60},"generated":{"line":1,"column":511}},{"source":"EBMLEncoder.js","original":{"line":19,"column":4},"generated":{"line":1,"column":514}},{"source":"EBMLEncoder.js","name":"mod","original":{"line":19,"column":8},"generated":{"line":1,"column":517}},{"source":"EBMLEncoder.js","name":"mod","original":{"line":19,"column":15},"generated":{"line":1,"column":520}},{"source":"EBMLEncoder.js","name":"__esModule","original":{"line":19,"column":19},"generated":{"line":1,"column":522}},{"source":"EBMLEncoder.js","original":{"line":19,"column":31},"generated":{"line":1,"column":533}},{"source":"EBMLEncoder.js","name":"mod","original":{"line":19,"column":38},"generated":{"line":1,"column":540}},{"source":"EBMLEncoder.js","original":{"line":20,"column":4},"generated":{"line":1,"column":542}},{"source":"EBMLEncoder.js","name":"result","original":{"line":20,"column":8},"generated":{"line":1,"column":546}},{"source":"EBMLEncoder.js","original":{"line":20,"column":17},"generated":{"line":1,"column":548}},{"source":"EBMLEncoder.js","original":{"line":21,"column":4},"generated":{"line":1,"column":551}},{"source":"EBMLEncoder.js","original":{"line":21,"column":15},"generated":{"line":1,"column":554}},{"source":"EBMLEncoder.js","name":"mod","original":{"line":21,"column":8},"generated":{"line":1,"column":560}},{"source":"EBMLEncoder.js","original":{"line":21,"column":21},"generated":{"line":1,"column":562}},{"source":"EBMLEncoder.js","original":{"line":21,"column":26},"generated":{"line":1,"column":566}},{"source":"EBMLEncoder.js","name":"k","original":{"line":21,"column":30},"generated":{"line":1,"column":570}},{"source":"EBMLEncoder.js","name":"mod","original":{"line":21,"column":35},"generated":{"line":1,"column":575}},{"source":"EBMLEncoder.js","original":{"line":21,"column":50},"generated":{"line":1,"column":577}},{"source":"EBMLEncoder.js","name":"k","original":{"line":21,"column":44},"generated":{"line":1,"column":589}},{"source":"EBMLEncoder.js","name":"Object","original":{"line":21,"column":63},"generated":{"line":1,"column":592}},{"source":"EBMLEncoder.js","name":"prototype","original":{"line":21,"column":70},"generated":{"line":1,"column":599}},{"source":"EBMLEncoder.js","name":"hasOwnProperty","original":{"line":21,"column":80},"generated":{"line":1,"column":609}},{"source":"EBMLEncoder.js","name":"call","original":{"line":21,"column":95},"generated":{"line":1,"column":624}},{"source":"EBMLEncoder.js","name":"mod","original":{"line":21,"column":100},"generated":{"line":1,"column":629}},{"source":"EBMLEncoder.js","name":"k","original":{"line":21,"column":105},"generated":{"line":1,"column":631}},{"source":"EBMLEncoder.js","name":"__createBinding","original":{"line":21,"column":109},"generated":{"line":1,"column":635}},{"source":"EBMLEncoder.js","name":"result","original":{"line":21,"column":125},"generated":{"line":1,"column":637}},{"source":"EBMLEncoder.js","name":"mod","original":{"line":21,"column":133},"generated":{"line":1,"column":639}},{"source":"EBMLEncoder.js","name":"k","original":{"line":21,"column":138},"generated":{"line":1,"column":641}},{"source":"EBMLEncoder.js","original":{"line":23,"column":4},"generated":{"line":1,"column":644}},{"source":"EBMLEncoder.js","name":"__setModuleDefault","original":{"line":22,"column":4},"generated":{"line":1,"column":651}},{"source":"EBMLEncoder.js","name":"result","original":{"line":22,"column":23},"generated":{"line":1,"column":653}},{"source":"EBMLEncoder.js","name":"mod","original":{"line":22,"column":31},"generated":{"line":1,"column":655}},{"source":"EBMLEncoder.js","name":"result","original":{"line":23,"column":11},"generated":{"line":1,"column":658}},{"source":"EBMLEncoder.js","name":"Object","original":{"line":25,"column":0},"generated":{"line":1,"column":661}},{"source":"EBMLEncoder.js","name":"defineProperty","original":{"line":25,"column":7},"generated":{"line":1,"column":668}},{"source":"EBMLEncoder.js","name":"exports","original":{"line":25,"column":22},"generated":{"line":1,"column":683}},{"source":"EBMLEncoder.js","original":{"line":25,"column":31},"generated":{"line":1,"column":691}},{"source":"EBMLEncoder.js","original":{"line":25,"column":45},"generated":{"line":1,"column":704}},{"source":"EBMLEncoder.js","name":"value","original":{"line":25,"column":47},"generated":{"line":1,"column":705}},{"source":"EBMLEncoder.js","original":{"line":25,"column":54},"generated":{"line":1,"column":712}},{"source":"EBMLEncoder.js","original":{"line":26,"column":0},"generated":{"line":1,"column":716}},{"source":"EBMLEncoder.js","name":"tools","original":{"line":26,"column":6},"generated":{"line":1,"column":722}},{"source":"EBMLEncoder.js","name":"__importStar","original":{"line":26,"column":14},"generated":{"line":1,"column":724}},{"source":"EBMLEncoder.js","name":"require","original":{"line":26,"column":27},"generated":{"line":1,"column":726}},{"source":"EBMLEncoder.js","original":{"line":26,"column":35},"generated":{"line":1,"column":734}},{"source":"EBMLEncoder.js","name":"schema","original":{"line":27,"column":6},"generated":{"line":1,"column":746}},{"source":"EBMLEncoder.js","name":"require","original":{"line":27,"column":15},"generated":{"line":1,"column":748}},{"source":"EBMLEncoder.js","original":{"line":27,"column":23},"generated":{"line":1,"column":756}},{"source":"EBMLEncoder.js","original":{"line":28,"column":6},"generated":{"line":1,"column":776}},{"source":"EBMLEncoder.js","name":"byEbmlID","original":{"line":28,"column":8},"generated":{"line":1,"column":785}},{"source":"EBMLEncoder.js","name":"schema","original":{"line":28,"column":21},"generated":{"line":1,"column":788}},{"source":"EBMLEncoder.js","original":{"line":29,"column":0},"generated":{"line":1,"column":790}},{"source":"EBMLEncoder.js","name":"EBMLEncoder","original":{"line":29,"column":6},"generated":{"line":1,"column":796}},{"source":"EBMLEncoder.js","name":"constructor","original":{"line":30,"column":4},"generated":{"line":1,"column":798}},{"source":"EBMLEncoder.js","original":{"line":31,"column":8},"generated":{"line":1,"column":812}},{"source":"EBMLEncoder.js","name":"_schema","original":{"line":31,"column":13},"generated":{"line":1,"column":817}},{"source":"EBMLEncoder.js","name":"byEbmlID","original":{"line":31,"column":23},"generated":{"line":1,"column":825}},{"source":"EBMLEncoder.js","original":{"line":32,"column":8},"generated":{"line":1,"column":827}},{"source":"EBMLEncoder.js","name":"_buffers","original":{"line":32,"column":13},"generated":{"line":1,"column":832}},{"source":"EBMLEncoder.js","original":{"line":32,"column":24},"generated":{"line":1,"column":841}},{"source":"EBMLEncoder.js","original":{"line":33,"column":8},"generated":{"line":1,"column":844}},{"source":"EBMLEncoder.js","name":"_stack","original":{"line":33,"column":13},"generated":{"line":1,"column":849}},{"source":"EBMLEncoder.js","original":{"line":33,"column":22},"generated":{"line":1,"column":856}},{"source":"EBMLEncoder.js","name":"encode","original":{"line":35,"column":4},"generated":{"line":1,"column":859}},{"source":"EBMLEncoder.js","name":"elms","original":{"line":35,"column":11},"generated":{"line":1,"column":866}},{"source":"EBMLEncoder.js","original":{"line":36,"column":8},"generated":{"line":1,"column":869}},{"source":"EBMLEncoder.js","name":"tools","original":{"line":36,"column":15},"generated":{"line":1,"column":876}},{"source":"EBMLEncoder.js","name":"concat","original":{"line":36,"column":21},"generated":{"line":1,"column":878}},{"source":"EBMLEncoder.js","name":"elms","original":{"line":36,"column":28},"generated":{"line":1,"column":885}},{"source":"EBMLEncoder.js","name":"reduce","original":{"line":36,"column":33},"generated":{"line":1,"column":887}},{"source":"EBMLEncoder.js","original":{"line":36,"column":40},"generated":{"line":1,"column":894}},{"source":"EBMLEncoder.js","name":"lst","original":{"line":36,"column":41},"generated":{"line":1,"column":895}},{"source":"EBMLEncoder.js","name":"elm","original":{"line":36,"column":46},"generated":{"line":1,"column":897}},{"source":"EBMLEncoder.js","name":"lst","original":{"line":36,"column":54},"generated":{"line":1,"column":901}},{"source":"EBMLEncoder.js","name":"concat","original":{"line":36,"column":58},"generated":{"line":1,"column":903}},{"source":"EBMLEncoder.js","original":{"line":36,"column":65},"generated":{"line":1,"column":910}},{"source":"EBMLEncoder.js","name":"encodeChunk","original":{"line":36,"column":70},"generated":{"line":1,"column":915}},{"source":"EBMLEncoder.js","name":"elm","original":{"line":36,"column":82},"generated":{"line":1,"column":927}},{"source":"EBMLEncoder.js","original":{"line":36,"column":89},"generated":{"line":1,"column":931}},{"source":"EBMLEncoder.js","name":"buffer","original":{"line":36,"column":94},"generated":{"line":1,"column":936}},{"source":"EBMLEncoder.js","name":"encodeChunk","original":{"line":38,"column":4},"generated":{"line":1,"column":943}},{"source":"EBMLEncoder.js","name":"elm","original":{"line":38,"column":16},"generated":{"line":1,"column":955}},{"source":"EBMLEncoder.js","original":{"line":52,"column":8},"generated":{"line":1,"column":958}},{"source":"EBMLEncoder.js","original":{"line":39,"column":25},"generated":{"line":1,"column":964}},{"source":"EBMLEncoder.js","name":"elm","original":{"line":39,"column":12},"generated":{"line":1,"column":970}},{"source":"EBMLEncoder.js","name":"type","original":{"line":39,"column":16},"generated":{"line":1,"column":972}},{"source":"EBMLEncoder.js","name":"elm","original":{"line":40,"column":17},"generated":{"line":1,"column":977}},{"source":"EBMLEncoder.js","name":"isEnd","original":{"line":40,"column":21},"generated":{"line":1,"column":979}},{"source":"EBMLEncoder.js","original":{"line":44,"column":16},"generated":{"line":1,"column":985}},{"source":"EBMLEncoder.js","name":"endTag","original":{"line":44,"column":21},"generated":{"line":1,"column":990}},{"source":"EBMLEncoder.js","name":"elm","original":{"line":44,"column":28},"generated":{"line":1,"column":997}},{"source":"EBMLEncoder.js","original":{"line":41,"column":16},"generated":{"line":1,"column":1000}},{"source":"EBMLEncoder.js","name":"startTag","original":{"line":41,"column":21},"generated":{"line":1,"column":1005}},{"source":"EBMLEncoder.js","name":"elm","original":{"line":41,"column":30},"generated":{"line":1,"column":1014}},{"source":"EBMLEncoder.js","name":"elm","original":{"line":49,"column":12},"generated":{"line":1,"column":1018}},{"source":"EBMLEncoder.js","name":"data","original":{"line":49,"column":16},"generated":{"line":1,"column":1020}},{"source":"EBMLEncoder.js","name":"Buffer","original":{"line":49,"column":23},"generated":{"line":1,"column":1025}},{"source":"EBMLEncoder.js","name":"from","original":{"line":49,"column":30},"generated":{"line":1,"column":1032}},{"source":"EBMLEncoder.js","name":"elm","original":{"line":49,"column":35},"generated":{"line":1,"column":1037}},{"source":"EBMLEncoder.js","name":"data","original":{"line":49,"column":39},"generated":{"line":1,"column":1039}},{"source":"EBMLEncoder.js","original":{"line":50,"column":12},"generated":{"line":1,"column":1045}},{"source":"EBMLEncoder.js","name":"writeTag","original":{"line":50,"column":17},"generated":{"line":1,"column":1050}},{"source":"EBMLEncoder.js","name":"elm","original":{"line":50,"column":26},"generated":{"line":1,"column":1059}},{"source":"EBMLEncoder.js","original":{"line":52,"column":15},"generated":{"line":1,"column":1063}},{"source":"EBMLEncoder.js","name":"flush","original":{"line":52,"column":20},"generated":{"line":1,"column":1068}},{"source":"EBMLEncoder.js","name":"flush","original":{"line":54,"column":4},"generated":{"line":1,"column":1076}},{"source":"EBMLEncoder.js","original":{"line":55,"column":8},"generated":{"line":1,"column":1084}},{"source":"EBMLEncoder.js","name":"ret","original":{"line":55,"column":14},"generated":{"line":1,"column":1090}},{"source":"EBMLEncoder.js","original":{"line":55,"column":20},"generated":{"line":1,"column":1092}},{"source":"EBMLEncoder.js","name":"_buffers","original":{"line":55,"column":25},"generated":{"line":1,"column":1097}},{"source":"EBMLEncoder.js","original":{"line":57,"column":8},"generated":{"line":1,"column":1106}},{"source":"EBMLEncoder.js","original":{"line":56,"column":8},"generated":{"line":1,"column":1113}},{"source":"EBMLEncoder.js","name":"_buffers","original":{"line":56,"column":13},"generated":{"line":1,"column":1118}},{"source":"EBMLEncoder.js","original":{"line":56,"column":24},"generated":{"line":1,"column":1127}},{"source":"EBMLEncoder.js","name":"ret","original":{"line":57,"column":15},"generated":{"line":1,"column":1130}},{"source":"EBMLEncoder.js","name":"getSchemaInfo","original":{"line":59,"column":4},"generated":{"line":1,"column":1132}},{"source":"EBMLEncoder.js","name":"tagName","original":{"line":59,"column":18},"generated":{"line":1,"column":1146}},{"source":"EBMLEncoder.js","original":{"line":60,"column":8},"generated":{"line":1,"column":1149}},{"source":"EBMLEncoder.js","original":{"line":60,"column":13},"generated":{"line":1,"column":1153}},{"source":"EBMLEncoder.js","name":"tagNum","original":{"line":60,"column":20},"generated":{"line":1,"column":1159}},{"source":"EBMLEncoder.js","name":"tagVal","original":{"line":60,"column":28},"generated":{"line":1,"column":1161}},{"source":"EBMLEncoder.js","name":"Object","original":{"line":60,"column":39},"generated":{"line":1,"column":1166}},{"source":"EBMLEncoder.js","name":"entries","original":{"line":60,"column":46},"generated":{"line":1,"column":1173}},{"source":"EBMLEncoder.js","original":{"line":60,"column":54},"generated":{"line":1,"column":1181}},{"source":"EBMLEncoder.js","name":"_schema","original":{"line":60,"column":59},"generated":{"line":1,"column":1186}},{"source":"EBMLEncoder.js","original":{"line":61,"column":12},"generated":{"line":1,"column":1195}},{"source":"EBMLEncoder.js","name":"tagVal","original":{"line":61,"column":16},"generated":{"line":1,"column":1198}},{"source":"EBMLEncoder.js","name":"name","original":{"line":61,"column":23},"generated":{"line":1,"column":1200}},{"source":"EBMLEncoder.js","name":"tagName","original":{"line":61,"column":32},"generated":{"line":1,"column":1207}},{"source":"EBMLEncoder.js","original":{"line":62,"column":16},"generated":{"line":1,"column":1209}},{"source":"EBMLEncoder.js","name":"Buffer","original":{"line":62,"column":23},"generated":{"line":1,"column":1216}},{"source":"EBMLEncoder.js","name":"from","original":{"line":62,"column":30},"generated":{"line":1,"column":1223}},{"source":"EBMLEncoder.js","name":"Number","original":{"line":62,"column":35},"generated":{"line":1,"column":1228}},{"source":"EBMLEncoder.js","name":"tagNum","original":{"line":62,"column":42},"generated":{"line":1,"column":1235}},{"source":"EBMLEncoder.js","name":"toString","original":{"line":62,"column":50},"generated":{"line":1,"column":1238}},{"source":"EBMLEncoder.js","original":{"line":62,"column":59},"generated":{"line":1,"column":1247}},{"source":"EBMLEncoder.js","original":{"line":62,"column":64},"generated":{"line":1,"column":1251}},{"source":"EBMLEncoder.js","original":{"line":65,"column":8},"generated":{"line":1,"column":1258}},{"source":"EBMLEncoder.js","original":{"line":65,"column":15},"generated":{"line":1,"column":1265}},{"source":"EBMLEncoder.js","name":"writeTag","original":{"line":67,"column":4},"generated":{"line":1,"column":1270}},{"source":"EBMLEncoder.js","name":"elm","original":{"line":67,"column":13},"generated":{"line":1,"column":1279}},{"source":"EBMLEncoder.js","original":{"line":68,"column":8},"generated":{"line":1,"column":1282}},{"source":"EBMLEncoder.js","name":"tagName","original":{"line":68,"column":14},"generated":{"line":1,"column":1288}},{"source":"EBMLEncoder.js","name":"elm","original":{"line":68,"column":24},"generated":{"line":1,"column":1290}},{"source":"EBMLEncoder.js","name":"name","original":{"line":68,"column":28},"generated":{"line":1,"column":1292}},{"source":"EBMLEncoder.js","name":"tagId","original":{"line":69,"column":14},"generated":{"line":1,"column":1297}},{"source":"EBMLEncoder.js","original":{"line":69,"column":22},"generated":{"line":1,"column":1299}},{"source":"EBMLEncoder.js","name":"getSchemaInfo","original":{"line":69,"column":27},"generated":{"line":1,"column":1304}},{"source":"EBMLEncoder.js","name":"tagName","original":{"line":69,"column":41},"generated":{"line":1,"column":1318}},{"source":"EBMLEncoder.js","name":"tagData","original":{"line":70,"column":14},"generated":{"line":1,"column":1321}},{"source":"EBMLEncoder.js","name":"elm","original":{"line":70,"column":24},"generated":{"line":1,"column":1323}},{"source":"EBMLEncoder.js","name":"data","original":{"line":70,"column":28},"generated":{"line":1,"column":1325}},{"source":"EBMLEncoder.js","original":{"line":71,"column":8},"generated":{"line":1,"column":1330}},{"source":"EBMLEncoder.js","original":{"line":71,"column":21},"generated":{"line":1,"column":1333}},{"source":"EBMLEncoder.js","name":"tagId","original":{"line":71,"column":12},"generated":{"line":1,"column":1339}},{"source":"EBMLEncoder.js","original":{"line":72,"column":12},"generated":{"line":1,"column":1341}},{"source":"EBMLEncoder.js","original":{"line":72,"column":18},"generated":{"line":1,"column":1347}},{"source":"EBMLEncoder.js","name":"Error","original":{"line":72,"column":22},"generated":{"line":1,"column":1351}},{"source":"EBMLEncoder.js","original":{"line":72,"column":28},"generated":{"line":1,"column":1357}},{"source":"EBMLEncoder.js","name":"tagName","original":{"line":72,"column":59},"generated":{"line":1,"column":1386}},{"source":"EBMLEncoder.js","original":{"line":74,"column":8},"generated":{"line":1,"column":1389}},{"source":"EBMLEncoder.js","name":"data","original":{"line":74,"column":14},"generated":{"line":1,"column":1395}},{"source":"EBMLEncoder.js","name":"tools","original":{"line":74,"column":21},"generated":{"line":1,"column":1397}},{"source":"EBMLEncoder.js","name":"encodeTag","original":{"line":74,"column":27},"generated":{"line":1,"column":1399}},{"source":"EBMLEncoder.js","name":"tagId","original":{"line":74,"column":37},"generated":{"line":1,"column":1409}},{"source":"EBMLEncoder.js","name":"tagData","original":{"line":74,"column":44},"generated":{"line":1,"column":1411}},{"source":"EBMLEncoder.js","original":{"line":76,"column":8},"generated":{"line":1,"column":1414}},{"source":"EBMLEncoder.js","original":{"line":76,"column":12},"generated":{"line":1,"column":1417}},{"source":"EBMLEncoder.js","name":"_stack","original":{"line":76,"column":17},"generated":{"line":1,"column":1422}},{"source":"EBMLEncoder.js","name":"length","original":{"line":76,"column":24},"generated":{"line":1,"column":1429}},{"source":"EBMLEncoder.js","original":{"line":76,"column":33},"generated":{"line":1,"column":1436}},{"source":"EBMLEncoder.js","original":{"line":76,"column":8},"generated":{"line":1,"column":1438}},{"source":"EBMLEncoder.js","original":{"line":77,"column":25},"generated":{"line":1,"column":1439}},{"source":"EBMLEncoder.js","name":"_stack","original":{"line":77,"column":30},"generated":{"line":1,"column":1444}},{"source":"EBMLEncoder.js","original":{"line":77,"column":37},"generated":{"line":1,"column":1451}},{"source":"EBMLEncoder.js","name":"_stack","original":{"line":77,"column":42},"generated":{"line":1,"column":1456}},{"source":"EBMLEncoder.js","name":"length","original":{"line":77,"column":49},"generated":{"line":1,"column":1463}},{"source":"EBMLEncoder.js","original":{"line":77,"column":58},"generated":{"line":1,"column":1470}},{"source":"EBMLEncoder.js","name":"children","original":{"line":78,"column":17},"generated":{"line":1,"column":1473}},{"source":"EBMLEncoder.js","name":"push","original":{"line":78,"column":26},"generated":{"line":1,"column":1482}},{"source":"EBMLEncoder.js","original":{"line":78,"column":31},"generated":{"line":1,"column":1487}},{"source":"EBMLEncoder.js","name":"tagId","original":{"line":79,"column":16},"generated":{"line":1,"column":1488}},{"source":"EBMLEncoder.js","name":"tagId","original":{"line":79,"column":16},"generated":{"line":1,"column":1494}},{"source":"EBMLEncoder.js","name":"elm","original":{"line":80,"column":16},"generated":{"line":1,"column":1496}},{"source":"EBMLEncoder.js","name":"elm","original":{"line":80,"column":16},"generated":{"line":1,"column":1500}},{"source":"EBMLEncoder.js","name":"children","original":{"line":81,"column":16},"generated":{"line":1,"column":1502}},{"source":"EBMLEncoder.js","original":{"line":81,"column":26},"generated":{"line":1,"column":1511}},{"source":"EBMLEncoder.js","name":"data","original":{"line":82,"column":16},"generated":{"line":1,"column":1514}},{"source":"EBMLEncoder.js","name":"data","original":{"line":82,"column":16},"generated":{"line":1,"column":1519}},{"source":"EBMLEncoder.js","original":{"line":86,"column":8},"generated":{"line":1,"column":1528}},{"source":"EBMLEncoder.js","name":"_buffers","original":{"line":86,"column":13},"generated":{"line":1,"column":1533}},{"source":"EBMLEncoder.js","original":{"line":86,"column":24},"generated":{"line":1,"column":1542}},{"source":"EBMLEncoder.js","name":"_buffers","original":{"line":86,"column":29},"generated":{"line":1,"column":1547}},{"source":"EBMLEncoder.js","name":"concat","original":{"line":86,"column":38},"generated":{"line":1,"column":1556}},{"source":"EBMLEncoder.js","name":"data","original":{"line":86,"column":45},"generated":{"line":1,"column":1563}},{"source":"EBMLEncoder.js","name":"startTag","original":{"line":89,"column":4},"generated":{"line":1,"column":1566}},{"source":"EBMLEncoder.js","name":"elm","original":{"line":89,"column":13},"generated":{"line":1,"column":1575}},{"source":"EBMLEncoder.js","original":{"line":90,"column":8},"generated":{"line":1,"column":1578}},{"source":"EBMLEncoder.js","name":"tagName","original":{"line":90,"column":14},"generated":{"line":1,"column":1584}},{"source":"EBMLEncoder.js","name":"elm","original":{"line":90,"column":24},"generated":{"line":1,"column":1586}},{"source":"EBMLEncoder.js","name":"name","original":{"line":90,"column":28},"generated":{"line":1,"column":1588}},{"source":"EBMLEncoder.js","name":"tagId","original":{"line":91,"column":14},"generated":{"line":1,"column":1593}},{"source":"EBMLEncoder.js","original":{"line":91,"column":22},"generated":{"line":1,"column":1595}},{"source":"EBMLEncoder.js","name":"getSchemaInfo","original":{"line":91,"column":27},"generated":{"line":1,"column":1600}},{"source":"EBMLEncoder.js","name":"tagName","original":{"line":91,"column":41},"generated":{"line":1,"column":1614}},{"source":"EBMLEncoder.js","original":{"line":92,"column":8},"generated":{"line":1,"column":1617}},{"source":"EBMLEncoder.js","original":{"line":92,"column":21},"generated":{"line":1,"column":1620}},{"source":"EBMLEncoder.js","name":"tagId","original":{"line":92,"column":12},"generated":{"line":1,"column":1626}},{"source":"EBMLEncoder.js","original":{"line":93,"column":12},"generated":{"line":1,"column":1628}},{"source":"EBMLEncoder.js","original":{"line":93,"column":18},"generated":{"line":1,"column":1634}},{"source":"EBMLEncoder.js","name":"Error","original":{"line":93,"column":22},"generated":{"line":1,"column":1638}},{"source":"EBMLEncoder.js","original":{"line":93,"column":28},"generated":{"line":1,"column":1644}},{"source":"EBMLEncoder.js","name":"tagName","original":{"line":93,"column":59},"generated":{"line":1,"column":1673}},{"source":"EBMLEncoder.js","original":{"line":96,"column":8},"generated":{"line":1,"column":1676}},{"source":"EBMLEncoder.js","name":"elm","original":{"line":96,"column":12},"generated":{"line":1,"column":1679}},{"source":"EBMLEncoder.js","name":"unknownSize","original":{"line":96,"column":16},"generated":{"line":1,"column":1681}},{"source":"EBMLEncoder.js","original":{"line":96,"column":29},"generated":{"line":1,"column":1693}},{"source":"EBMLEncoder.js","original":{"line":97,"column":12},"generated":{"line":1,"column":1694}},{"source":"EBMLEncoder.js","name":"data","original":{"line":97,"column":18},"generated":{"line":1,"column":1700}},{"source":"EBMLEncoder.js","name":"tools","original":{"line":97,"column":25},"generated":{"line":1,"column":1702}},{"source":"EBMLEncoder.js","name":"encodeTag","original":{"line":97,"column":31},"generated":{"line":1,"column":1704}},{"source":"EBMLEncoder.js","name":"tagId","original":{"line":97,"column":41},"generated":{"line":1,"column":1714}},{"source":"EBMLEncoder.js","name":"Buffer","original":{"line":97,"column":48},"generated":{"line":1,"column":1716}},{"source":"EBMLEncoder.js","name":"from","original":{"line":97,"column":55},"generated":{"line":1,"column":1723}},{"source":"EBMLEncoder.js","original":{"line":97,"column":60},"generated":{"line":1,"column":1728}},{"source":"EBMLEncoder.js","name":"ArrayBuffer","original":{"line":97,"column":64},"generated":{"line":1,"column":1732}},{"source":"EBMLEncoder.js","original":{"line":97,"column":76},"generated":{"line":1,"column":1744}},{"source":"EBMLEncoder.js","name":"elm","original":{"line":97,"column":81},"generated":{"line":1,"column":1748}},{"source":"EBMLEncoder.js","name":"unknownSize","original":{"line":97,"column":85},"generated":{"line":1,"column":1750}},{"source":"EBMLEncoder.js","original":{"line":99,"column":12},"generated":{"line":1,"column":1763}},{"source":"EBMLEncoder.js","original":{"line":98,"column":12},"generated":{"line":1,"column":1775}},{"source":"EBMLEncoder.js","name":"_buffers","original":{"line":98,"column":17},"generated":{"line":1,"column":1780}},{"source":"EBMLEncoder.js","original":{"line":98,"column":28},"generated":{"line":1,"column":1789}},{"source":"EBMLEncoder.js","name":"_buffers","original":{"line":98,"column":33},"generated":{"line":1,"column":1794}},{"source":"EBMLEncoder.js","name":"concat","original":{"line":98,"column":42},"generated":{"line":1,"column":1803}},{"source":"EBMLEncoder.js","name":"data","original":{"line":98,"column":49},"generated":{"line":1,"column":1810}},{"source":"EBMLEncoder.js","original":{"line":101,"column":8},"generated":{"line":1,"column":1814}},{"source":"EBMLEncoder.js","name":"tag","original":{"line":101,"column":14},"generated":{"line":1,"column":1820}},{"source":"EBMLEncoder.js","original":{"line":101,"column":20},"generated":{"line":1,"column":1822}},{"source":"EBMLEncoder.js","name":"tagId","original":{"line":102,"column":12},"generated":{"line":1,"column":1823}},{"source":"EBMLEncoder.js","name":"tagId","original":{"line":102,"column":12},"generated":{"line":1,"column":1829}},{"source":"EBMLEncoder.js","name":"elm","original":{"line":103,"column":12},"generated":{"line":1,"column":1831}},{"source":"EBMLEncoder.js","name":"elm","original":{"line":103,"column":12},"generated":{"line":1,"column":1835}},{"source":"EBMLEncoder.js","name":"children","original":{"line":104,"column":12},"generated":{"line":1,"column":1837}},{"source":"EBMLEncoder.js","original":{"line":104,"column":22},"generated":{"line":1,"column":1846}},{"source":"EBMLEncoder.js","name":"data","original":{"line":105,"column":12},"generated":{"line":1,"column":1849}},{"source":"EBMLEncoder.js","original":{"line":105,"column":18},"generated":{"line":1,"column":1854}},{"source":"EBMLEncoder.js","original":{"line":107,"column":12},"generated":{"line":1,"column":1860}},{"source":"EBMLEncoder.js","name":"_stack","original":{"line":107,"column":17},"generated":{"line":1,"column":1865}},{"source":"EBMLEncoder.js","name":"length","original":{"line":107,"column":24},"generated":{"line":1,"column":1872}},{"source":"EBMLEncoder.js","original":{"line":107,"column":33},"generated":{"line":1,"column":1879}},{"source":"EBMLEncoder.js","original":{"line":108,"column":12},"generated":{"line":1,"column":1882}},{"source":"EBMLEncoder.js","name":"_stack","original":{"line":108,"column":17},"generated":{"line":1,"column":1887}},{"source":"EBMLEncoder.js","original":{"line":108,"column":24},"generated":{"line":1,"column":1894}},{"source":"EBMLEncoder.js","name":"_stack","original":{"line":108,"column":29},"generated":{"line":1,"column":1899}},{"source":"EBMLEncoder.js","name":"length","original":{"line":108,"column":36},"generated":{"line":1,"column":1906}},{"source":"EBMLEncoder.js","original":{"line":108,"column":45},"generated":{"line":1,"column":1913}},{"source":"EBMLEncoder.js","name":"children","original":{"line":108,"column":48},"generated":{"line":1,"column":1916}},{"source":"EBMLEncoder.js","name":"push","original":{"line":108,"column":57},"generated":{"line":1,"column":1925}},{"source":"EBMLEncoder.js","name":"tag","original":{"line":108,"column":62},"generated":{"line":1,"column":1930}},{"source":"EBMLEncoder.js","original":{"line":110,"column":8},"generated":{"line":1,"column":1933}},{"source":"EBMLEncoder.js","name":"_stack","original":{"line":110,"column":13},"generated":{"line":1,"column":1938}},{"source":"EBMLEncoder.js","name":"push","original":{"line":110,"column":20},"generated":{"line":1,"column":1945}},{"source":"EBMLEncoder.js","name":"tag","original":{"line":110,"column":25},"generated":{"line":1,"column":1950}},{"source":"EBMLEncoder.js","name":"endTag","original":{"line":112,"column":4},"generated":{"line":1,"column":1953}},{"source":"EBMLEncoder.js","name":"elm","original":{"line":112,"column":11},"generated":{"line":1,"column":1960}},{"source":"EBMLEncoder.js","original":{"line":113,"column":8},"generated":{"line":1,"column":1963}},{"source":"EBMLEncoder.js","name":"tag","original":{"line":113,"column":14},"generated":{"line":1,"column":1969}},{"source":"EBMLEncoder.js","original":{"line":113,"column":20},"generated":{"line":1,"column":1971}},{"source":"EBMLEncoder.js","name":"_stack","original":{"line":113,"column":25},"generated":{"line":1,"column":1976}},{"source":"EBMLEncoder.js","name":"pop","original":{"line":113,"column":32},"generated":{"line":1,"column":1983}},{"source":"EBMLEncoder.js","original":{"line":114,"column":8},"generated":{"line":1,"column":1989}},{"source":"EBMLEncoder.js","original":{"line":114,"column":19},"generated":{"line":1,"column":1992}},{"source":"EBMLEncoder.js","name":"tag","original":{"line":114,"column":12},"generated":{"line":1,"column":1998}},{"source":"EBMLEncoder.js","original":{"line":115,"column":12},"generated":{"line":1,"column":2000}},{"source":"EBMLEncoder.js","original":{"line":115,"column":18},"generated":{"line":1,"column":2006}},{"source":"EBMLEncoder.js","name":"Error","original":{"line":115,"column":22},"generated":{"line":1,"column":2010}},{"source":"EBMLEncoder.js","original":{"line":115,"column":28},"generated":{"line":1,"column":2016}},{"source":"EBMLEncoder.js","original":{"line":117,"column":8},"generated":{"line":1,"column":2044}},{"source":"EBMLEncoder.js","name":"tag","original":{"line":117,"column":12},"generated":{"line":1,"column":2047}},{"source":"EBMLEncoder.js","name":"elm","original":{"line":117,"column":16},"generated":{"line":1,"column":2049}},{"source":"EBMLEncoder.js","name":"name","original":{"line":117,"column":20},"generated":{"line":1,"column":2053}},{"source":"EBMLEncoder.js","name":"elm","original":{"line":117,"column":29},"generated":{"line":1,"column":2060}},{"source":"EBMLEncoder.js","name":"name","original":{"line":117,"column":33},"generated":{"line":1,"column":2062}},{"source":"EBMLEncoder.js","original":{"line":118,"column":12},"generated":{"line":1,"column":2067}},{"source":"EBMLEncoder.js","original":{"line":118,"column":18},"generated":{"line":1,"column":2073}},{"source":"EBMLEncoder.js","name":"Error","original":{"line":118,"column":22},"generated":{"line":1,"column":2077}},{"source":"EBMLEncoder.js","original":{"line":118,"column":28},"generated":{"line":1,"column":2083}},{"source":"EBMLEncoder.js","original":{"line":120,"column":8},"generated":{"line":1,"column":2111}},{"source":"EBMLEncoder.js","name":"childTagDataBuffers","original":{"line":120,"column":14},"generated":{"line":1,"column":2117}},{"source":"EBMLEncoder.js","name":"tag","original":{"line":120,"column":36},"generated":{"line":1,"column":2119}},{"source":"EBMLEncoder.js","name":"children","original":{"line":120,"column":40},"generated":{"line":1,"column":2121}},{"source":"EBMLEncoder.js","name":"reduce","original":{"line":120,"column":49},"generated":{"line":1,"column":2130}},{"source":"EBMLEncoder.js","original":{"line":120,"column":56},"generated":{"line":1,"column":2137}},{"source":"EBMLEncoder.js","name":"lst","original":{"line":120,"column":57},"generated":{"line":1,"column":2138}},{"source":"EBMLEncoder.js","name":"child","original":{"line":120,"column":62},"generated":{"line":1,"column":2140}},{"source":"EBMLEncoder.js","original":{"line":121,"column":12},"generated":{"line":1,"column":2145}},{"source":"EBMLEncoder.js","original":{"line":121,"column":31},"generated":{"line":1,"column":2148}},{"source":"EBMLEncoder.js","name":"child","original":{"line":121,"column":16},"generated":{"line":1,"column":2155}},{"source":"EBMLEncoder.js","name":"data","original":{"line":121,"column":22},"generated":{"line":1,"column":2157}},{"source":"EBMLEncoder.js","original":{"line":122,"column":16},"generated":{"line":1,"column":2162}},{"source":"EBMLEncoder.js","original":{"line":122,"column":22},"generated":{"line":1,"column":2168}},{"source":"EBMLEncoder.js","name":"Error","original":{"line":122,"column":26},"generated":{"line":1,"column":2172}},{"source":"EBMLEncoder.js","original":{"line":122,"column":32},"generated":{"line":1,"column":2178}},{"source":"EBMLEncoder.js","original":{"line":124,"column":12},"generated":{"line":1,"column":2206}},{"source":"EBMLEncoder.js","name":"lst","original":{"line":124,"column":19},"generated":{"line":1,"column":2213}},{"source":"EBMLEncoder.js","name":"concat","original":{"line":124,"column":23},"generated":{"line":1,"column":2215}},{"source":"EBMLEncoder.js","name":"child","original":{"line":124,"column":30},"generated":{"line":1,"column":2222}},{"source":"EBMLEncoder.js","name":"data","original":{"line":124,"column":36},"generated":{"line":1,"column":2224}},{"source":"EBMLEncoder.js","original":{"line":125,"column":11},"generated":{"line":1,"column":2231}},{"source":"EBMLEncoder.js","name":"childTagDataBuffer","original":{"line":126,"column":14},"generated":{"line":1,"column":2235}},{"source":"EBMLEncoder.js","name":"tools","original":{"line":126,"column":35},"generated":{"line":1,"column":2237}},{"source":"EBMLEncoder.js","name":"concat","original":{"line":126,"column":41},"generated":{"line":1,"column":2239}},{"source":"EBMLEncoder.js","name":"childTagDataBuffers","original":{"line":126,"column":48},"generated":{"line":1,"column":2246}},{"source":"EBMLEncoder.js","original":{"line":127,"column":29},"generated":{"line":1,"column":2249}},{"source":"EBMLEncoder.js","name":"tag","original":{"line":127,"column":12},"generated":{"line":1,"column":2255}},{"source":"EBMLEncoder.js","name":"elm","original":{"line":127,"column":16},"generated":{"line":1,"column":2257}},{"source":"EBMLEncoder.js","name":"type","original":{"line":127,"column":20},"generated":{"line":1,"column":2261}},{"source":"EBMLEncoder.js","name":"tag","original":{"line":128,"column":12},"generated":{"line":1,"column":2266}},{"source":"EBMLEncoder.js","name":"data","original":{"line":128,"column":16},"generated":{"line":1,"column":2268}},{"source":"EBMLEncoder.js","name":"tools","original":{"line":128,"column":23},"generated":{"line":1,"column":2273}},{"source":"EBMLEncoder.js","name":"encodeTag","original":{"line":128,"column":29},"generated":{"line":1,"column":2275}},{"source":"EBMLEncoder.js","name":"tag","original":{"line":128,"column":39},"generated":{"line":1,"column":2285}},{"source":"EBMLEncoder.js","name":"tagId","original":{"line":128,"column":43},"generated":{"line":1,"column":2287}},{"source":"EBMLEncoder.js","name":"childTagDataBuffer","original":{"line":128,"column":50},"generated":{"line":1,"column":2293}},{"source":"EBMLEncoder.js","name":"tag","original":{"line":128,"column":70},"generated":{"line":1,"column":2295}},{"source":"EBMLEncoder.js","name":"elm","original":{"line":128,"column":74},"generated":{"line":1,"column":2297}},{"source":"EBMLEncoder.js","name":"unknownSize","original":{"line":128,"column":78},"generated":{"line":1,"column":2301}},{"source":"EBMLEncoder.js","name":"tag","original":{"line":131,"column":12},"generated":{"line":1,"column":2314}},{"source":"EBMLEncoder.js","name":"data","original":{"line":131,"column":16},"generated":{"line":1,"column":2316}},{"source":"EBMLEncoder.js","name":"tools","original":{"line":131,"column":23},"generated":{"line":1,"column":2321}},{"source":"EBMLEncoder.js","name":"encodeTag","original":{"line":131,"column":29},"generated":{"line":1,"column":2323}},{"source":"EBMLEncoder.js","name":"tag","original":{"line":131,"column":39},"generated":{"line":1,"column":2333}},{"source":"EBMLEncoder.js","name":"tagId","original":{"line":131,"column":43},"generated":{"line":1,"column":2335}},{"source":"EBMLEncoder.js","name":"childTagDataBuffer","original":{"line":131,"column":50},"generated":{"line":1,"column":2341}},{"source":"EBMLEncoder.js","original":{"line":133,"column":12},"generated":{"line":1,"column":2344}},{"source":"EBMLEncoder.js","name":"_stack","original":{"line":133,"column":17},"generated":{"line":1,"column":2349}},{"source":"EBMLEncoder.js","name":"length","original":{"line":133,"column":24},"generated":{"line":1,"column":2356}},{"source":"EBMLEncoder.js","original":{"line":133,"column":33},"generated":{"line":1,"column":2363}},{"source":"EBMLEncoder.js","original":{"line":134,"column":12},"generated":{"line":1,"column":2367}},{"source":"EBMLEncoder.js","name":"_buffers","original":{"line":134,"column":17},"generated":{"line":1,"column":2372}},{"source":"EBMLEncoder.js","original":{"line":134,"column":28},"generated":{"line":1,"column":2381}},{"source":"EBMLEncoder.js","name":"_buffers","original":{"line":134,"column":33},"generated":{"line":1,"column":2386}},{"source":"EBMLEncoder.js","name":"concat","original":{"line":134,"column":42},"generated":{"line":1,"column":2395}},{"source":"EBMLEncoder.js","name":"tag","original":{"line":134,"column":49},"generated":{"line":1,"column":2402}},{"source":"EBMLEncoder.js","name":"data","original":{"line":134,"column":53},"generated":{"line":1,"column":2404}},{"source":"EBMLEncoder.js","name":"exports","original":{"line":138,"column":0},"generated":{"line":1,"column":2412}},{"source":"EBMLEncoder.js","name":"default","original":{"line":138,"column":8},"generated":{"line":1,"column":2420}},{"source":"EBMLEncoder.js","name":"EBMLEncoder","original":{"line":138,"column":18},"generated":{"line":1,"column":2428}}],"sources":{"EBMLEncoder.js":"\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst tools = __importStar(require(\"./tools\"));\nconst schema = require(\"matroska-schema\");\nconst { byEbmlID } = schema;\nclass EBMLEncoder {\n    constructor() {\n        this._schema = byEbmlID;\n        this._buffers = [];\n        this._stack = [];\n    }\n    encode(elms) {\n        return tools.concat(elms.reduce((lst, elm) => lst.concat(this.encodeChunk(elm)), [])).buffer;\n    }\n    encodeChunk(elm) {\n        if (elm.type === \"m\") {\n            if (!elm.isEnd) {\n                this.startTag(elm);\n            }\n            else {\n                this.endTag(elm);\n            }\n        }\n        else {\n            // ensure that we are working with an internal `Buffer` instance\n            elm.data = Buffer.from(elm.data);\n            this.writeTag(elm);\n        }\n        return this.flush();\n    }\n    flush() {\n        const ret = this._buffers;\n        this._buffers = [];\n        return ret;\n    }\n    getSchemaInfo(tagName) {\n        for (const [tagNum, tagVal] of Object.entries(this._schema)) {\n            if (tagVal.name === tagName) {\n                return Buffer.from(Number(tagNum).toString(16), \"hex\");\n            }\n        }\n        return null;\n    }\n    writeTag(elm) {\n        const tagName = elm.name;\n        const tagId = this.getSchemaInfo(tagName);\n        const tagData = elm.data;\n        if (tagId == null) {\n            throw new Error(\"No schema entry found for \" + tagName);\n        }\n        const data = tools.encodeTag(tagId, tagData);\n        // 親要素が閉じタグあり(isEnd)なら閉じタグが来るまで待つ(children queに入る)\n        if (this._stack.length > 0) {\n            const last = this._stack[this._stack.length - 1];\n            last.children.push({\n                tagId,\n                elm,\n                children: [],\n                data\n            });\n            return;\n        }\n        this._buffers = this._buffers.concat(data);\n        return;\n    }\n    startTag(elm) {\n        const tagName = elm.name;\n        const tagId = this.getSchemaInfo(tagName);\n        if (tagId == null) {\n            throw new Error(\"No schema entry found for \" + tagName);\n        }\n        // 閉じタグ不定長の場合はスタックに積まずに即時バッファに書き込む\n        if (elm.unknownSize) {\n            const data = tools.encodeTag(tagId, Buffer.from(new ArrayBuffer(0)), elm.unknownSize);\n            this._buffers = this._buffers.concat(data);\n            return;\n        }\n        const tag = {\n            tagId,\n            elm,\n            children: [],\n            data: null\n        };\n        if (this._stack.length > 0) {\n            this._stack[this._stack.length - 1].children.push(tag);\n        }\n        this._stack.push(tag);\n    }\n    endTag(elm) {\n        const tag = this._stack.pop();\n        if (tag == null) {\n            throw new Error(\"EBML structure is broken\");\n        }\n        if (tag.elm.name !== elm.name) {\n            throw new Error(\"EBML structure is broken\");\n        }\n        const childTagDataBuffers = tag.children.reduce((lst, child) => {\n            if (child.data === null) {\n                throw new Error(\"EBML structure is broken\");\n            }\n            return lst.concat(child.data);\n        }, []);\n        const childTagDataBuffer = tools.concat(childTagDataBuffers);\n        if (tag.elm.type === \"m\") {\n            tag.data = tools.encodeTag(tag.tagId, childTagDataBuffer, tag.elm.unknownSize);\n        }\n        else {\n            tag.data = tools.encodeTag(tag.tagId, childTagDataBuffer);\n        }\n        if (this._stack.length < 1) {\n            this._buffers = this._buffers.concat(tag.data);\n        }\n    }\n}\nexports.default = EBMLEncoder;\n"},"lineCount":null}},"error":null,"hash":"67cbe9bd178bd1996b31782181ac2b5c","cacheData":{"env":{}}}